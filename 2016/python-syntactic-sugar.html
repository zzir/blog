<!DOCTYPE html>
<html lang="zh"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="ZZIR">
    <meta name="description" content="FUN~">
    <meta name="keywords" content="zzir,Golang,Python,Docker,K8S">

    <link rel="stylesheet" href="/assets/css/style.css">

    <link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.css">
    <link rel="stylesheet" href="/assets/css/github.css">

    <title>Python è¯­æ³•ç³–</title>
</head><body>
<main class="page-content" aria-label="Content">
    <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
    <div class="post-back" id="post-back" style="display: none">
        <a class="black-link" href="/">ğŸ¥³</a>
    </div>
    <header class="post-header">
        <h1 class="post-title p-name" itemprop="name headline">
            Python è¯­æ³•ç³–
        </h1>
        <p class="post-meta">
            <time class="dt-published" datetime="2016-08-13T00:00:00+08:00" itemprop="datePublished">Aug 13, 2016
            </time></p>
    </header>

    <div class="post-content e-content" itemprop="articleBody">
        <h2 id="python-è¯­æ³•ç³–">Python è¯­æ³•ç³–</h2>

<h3 id="æ¢è¡Œè¿æ¥">\ï¼Œæ¢è¡Œè¿æ¥</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">s</span> <span class="o">=</span> <span class="s">''</span>
<span class="n">s</span> <span class="o">+=</span> <span class="s">'a'</span> <span class="o">+</span> \
     <span class="s">'b'</span> <span class="o">+</span> \
     <span class="s">'c'</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">+</span> \
<span class="mi">3</span>
<span class="c1"># 6
</span></code></pre></div></div>

<h3 id="whilefor-å¾ªç¯å¤–çš„-else">whileï¼Œfor å¾ªç¯å¤–çš„ else</h3>
<p>å¦‚æœ while å¾ªç¯æ­£å¸¸ç»“æŸï¼ˆæ²¡æœ‰breaké€€å‡ºï¼‰å°±ä¼šæ‰§è¡Œelseã€‚</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">num</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">mark</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">mark</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">num</span><span class="p">[</span><span class="n">mark</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="c1"># break
</span>    <span class="n">mark</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">else</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s">"done"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="zip-å¹¶è¡Œè¿­ä»£">zip() å¹¶è¡Œè¿­ä»£</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s">'one'</span><span class="p">,</span><span class="s">'two'</span><span class="p">,</span><span class="s">'three'</span><span class="p">]</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">))</span>
<span class="c1"># [(1, 'one'), (2, 'two'), (3, 'three')]
</span></code></pre></div></div>

<h3 id="åˆ—è¡¨æ¨å¯¼å¼">åˆ—è¡¨æ¨å¯¼å¼</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)]</span>
<span class="c1"># [0, 1, 2, 3, 4, 5]
</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
<span class="c1"># [0, 2, 4]
</span>
<span class="c1"># å¤šå±‚åµŒå¥—
</span><span class="n">rows</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">cols</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span>
<span class="c1"># åŒ
</span><span class="n">rows</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">cols</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">rows</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">cols</span><span class="p">]</span>
</code></pre></div></div>

<h3 id="å­—å…¸æ¨å¯¼å¼">å­—å…¸æ¨å¯¼å¼</h3>
<p>{ key_exp : value_exp fro expression in iterable }</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#æŸ¥è¯¢æ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°ã€‚
</span><span class="n">strs</span> <span class="o">=</span> <span class="s">'Hello World'</span>
<span class="n">s</span> <span class="o">=</span> <span class="p">{</span> <span class="n">k</span> <span class="p">:</span> <span class="n">strs</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">strs</span><span class="p">)</span> <span class="p">}</span>
</code></pre></div></div>

<h3 id="é›†åˆæ¨å¯¼å¼">é›†åˆæ¨å¯¼å¼</h3>
<p>{expression for expression in iterable }</p>

<h3 id="å…ƒç»„æ²¡æœ‰æ¨å¯¼å¼">å…ƒç»„æ²¡æœ‰æ¨å¯¼å¼</h3>
<p>æœ¬ä»¥ä¸ºå…ƒç»„æ¨å¯¼å¼æ˜¯åˆ—è¡¨æ¨å¯¼å¼æ”¹æˆæ‹¬å·ï¼Œåæ¥å‘ç°é‚£ä¸ª ç”Ÿæˆå™¨æ¨å¯¼å¼ã€‚</p>

<h3 id="ç”Ÿæˆå™¨æ¨å¯¼å¼">ç”Ÿæˆå™¨æ¨å¯¼å¼</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">num</span> <span class="o">=</span> <span class="p">(</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">num</span>
<span class="p">...:</span><span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="o">&lt;</span><span class="n">genexpr</span><span class="o">&gt;</span> <span class="n">at</span> <span class="mh">0x7f50926758e0</span><span class="o">&gt;</span>

</code></pre></div></div>

<h2 id="å‡½æ•°">å‡½æ•°</h2>

<h3 id="å‡½æ•°å…³é”®å­—å‚æ•°é»˜è®¤å‚æ•°å€¼">å‡½æ•°å…³é”®å­—å‚æ•°ï¼Œé»˜è®¤å‚æ•°å€¼</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">do</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>

<span class="n">do</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></div>

<p>å‡½æ•°é»˜è®¤å‚æ•°å€¼åœ¨å‡½æ•°å®šä¹‰æ—¶å·²ç»è®¡ç®—å‡ºæ¥ï¼Œè€Œä¸æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶ã€‚<br />
åˆ—è¡¨å­—å…¸ç­‰å¯å˜æ•°æ®ç±»å‹ä¸å¯ä»¥ä½œä¸ºé»˜è®¤å‚æ•°å€¼ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">buygy</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="p">[]):</span>
    <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></div>

<p>changedï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">nobuygy</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">result</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="c1"># or
</span><span class="k">def</span> <span class="nf">nobuygy2</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="args-æ”¶é›†ä½ç½®å‚æ•°">*args æ”¶é›†ä½ç½®å‚æ•°</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">do</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="n">do</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="s">'d'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="kwargs-æ”¶é›†å…³é”®å­—å‚æ•°">**kwargs æ”¶é›†å…³é”®å­—å‚æ•°</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">do</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
  <span class="k">print</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
<span class="n">do</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="s">'la'</span><span class="p">)</span>
<span class="c1"># {'c': 'la', 'a': 1, 'b': 2}
</span></code></pre></div></div>

<h3 id="lamba-åŒ¿åå‡½æ•°">lamba åŒ¿åå‡½æ•°</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span>
<span class="n">a</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># 16
</span></code></pre></div></div>

<h3 id="ç”Ÿæˆå™¨">ç”Ÿæˆå™¨</h3>
<p>ç”Ÿæˆå™¨æ˜¯ç”¨æ¥åˆ›å»ºPythonåºåˆ—çš„ä¸€ä¸ªå¯¹è±¡ã€‚å¯ä»¥ç”¨å®ƒè¿­ä»£åºåˆ—è€Œä¸éœ€è¦åœ¨å†…å­˜ä¸­åˆ›å»ºå’Œå­˜å‚¨æ•´ä¸ªåºåˆ—ã€‚<br />
é€šå¸¸ï¼Œç”Ÿæˆå™¨æ˜¯ä¸ºè¿­ä»£å™¨äº§ç”Ÿæ•°æ®çš„ã€‚</p>

<p>ç”Ÿæˆå™¨å‡½æ•°å‡½æ•°å’Œæ™®é€šå‡½æ•°ç±»ä¼¼ï¼Œè¿”å›å€¼ä½¿ç”¨ yield è€Œä¸æ˜¯ return ã€‚</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">my_range</span><span class="p">(</span><span class="n">first</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">last</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">number</span> <span class="o">=</span> <span class="n">first</span>
    <span class="k">while</span> <span class="n">number</span> <span class="o">&lt;</span> <span class="n">last</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">number</span>
        <span class="n">number</span> <span class="o">+=</span> <span class="n">step</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">my_range</span><span class="p">()</span>
<span class="p">...</span> <span class="o">&lt;</span><span class="n">generator</span> <span class="nb">object</span> <span class="n">my_range</span> <span class="n">at</span> <span class="mh">0x7f02ea0a2bf8</span><span class="o">&gt;</span>
</code></pre></div></div>

<h3 id="è£…é¥°å™¨">è£…é¥°å™¨</h3>
<p>æœ‰æ—¶éœ€è¦åœ¨ä¸æ”¹å˜æºä»£ç çš„æƒ…å†µä¸‹ä¿®æ”¹å·²ç»å­˜åœ¨çš„å‡½æ•°ã€‚<br />
è£…é¥°å™¨å®è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæŠŠå‡½æ•°ä½œä¸ºå‚æ•°è¾“å…¥åˆ°å¦ä¸€ä¸ªå‡½æ•°ã€‚
ä¸¾ä¸ªæ —å­ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ä¸€ä¸ªè£…é¥°å™¨
</span><span class="k">def</span> <span class="nf">document_it</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">new_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Runing function: "</span><span class="p">,</span> <span class="n">func</span><span class="p">.</span><span class="n">__name__</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Positional arguments: "</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Keyword arguments: "</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Result: "</span> <span class="p">,</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">new_function</span>

<span class="c1"># äººå·¥èµ‹å€¼
</span><span class="k">def</span> <span class="nf">add_ints</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="n">cooler_add_ints</span> <span class="o">=</span> <span class="n">document_it</span><span class="p">(</span><span class="n">add_ints</span><span class="p">)</span> <span class="c1">#äººå·¥å¯¹è£…é¥°å™¨èµ‹å€¼
</span><span class="n">cooler_add_ints</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># å‡½æ•°å™¨å‰åŠ è£…é¥°å™¨åå­—
</span><span class="o">@</span><span class="n">document_it</span>
<span class="k">def</span> <span class="nf">add_ints</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</code></pre></div></div>
<p>å¯ä»¥ä½¿ç”¨å¤šä¸ªè£…é¥°å™¨ï¼Œå¤šä¸ªè£…é¥°ç”±å†…å‘å¤–å‘å¤–é¡ºåºæ‰§è¡Œã€‚</p>

<h3 id="å‘½åç©ºé—´å’Œä½œç”¨åŸŸ">å‘½åç©ºé—´å’Œä½œç”¨åŸŸ</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="mi">1234</span>
<span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"a = "</span><span class="p">,</span><span class="n">a</span><span class="p">)</span> <span class="c1"># True
####
</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1234</span>
<span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span><span class="mi">1</span>    <span class="c1">#False
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"a = "</span><span class="p">,</span><span class="n">a</span><span class="p">)</span>
</code></pre></div></div>

<p>å¯ä»¥ä½¿ç”¨å…¨å±€å˜é‡ <code class="highlighter-rouge">global a</code> ã€‚</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="mi">1234</span>
<span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">a</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span><span class="mi">1</span>    <span class="c1">#True
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"a = "</span><span class="p">,</span><span class="n">a</span><span class="p">)</span>
</code></pre></div></div>

<p>Python æä¾›äº†ä¸¤ä¸ªè·å–å‘½åç©ºé—´å†…å®¹çš„å‡½æ•°
<code class="highlighter-rouge">local()</code>
<code class="highlighter-rouge">global()</code></p>

<h3 id="_-å’Œ-__">_ å’Œ __</h3>
<p>Python ä¿ç•™ç”¨æ³•ã€‚
ä¸¾ä¸ªæ —å­ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">amazing</span><span class="p">():</span>
    <span class="s">'''This is the amazing.
    Hello
    world'''</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"The function named: "</span><span class="p">,</span> <span class="n">amazing</span><span class="p">.</span><span class="n">__name__</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"The function docstring is: </span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">amazing</span><span class="p">.</span><span class="n">__doc__</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="å¼‚å¸¸å¤„ç†tryexcept">å¼‚å¸¸å¤„ç†ï¼Œtryâ€¦except</h2>
<p>åªæœ‰é”™è¯¯å‘ç”Ÿæ—¶æ‰æ‰§è¡Œçš„ä»£ç ã€‚
ä¸¾ä¸ªæ —å­ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">l</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="nb">IndexError</span><span class="p">:</span> <span class="nb">list</span> <span class="n">index</span> <span class="n">out</span> <span class="n">of</span> <span class="nb">range</span>
</code></pre></div></div>
<p>å†è¯•ä¸‹ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">5</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">try</span><span class="p">:</span>
<span class="p">...</span>     <span class="n">l</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
<span class="p">...</span> <span class="k">except</span><span class="p">:</span>
<span class="p">...</span>     <span class="k">print</span><span class="p">(</span><span class="s">"Error: need a position between 0 and"</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">", But got"</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
<span class="p">...</span>
<span class="n">Error</span><span class="p">:</span> <span class="n">need</span> <span class="n">a</span> <span class="n">position</span> <span class="n">between</span> <span class="mi">0</span> <span class="ow">and</span> <span class="mi">2</span> <span class="p">,</span> <span class="n">But</span> <span class="n">got</span> <span class="mi">5</span>
</code></pre></div></div>
<p>æ²¡æœ‰è‡ªå®šå¼‚å¸¸ç±»å‹ä½¿ç”¨ä»»ä½•é”™è¯¯ã€‚</p>

<h3 id="è·å–å¼‚å¸¸å¯¹è±¡except-exceptiontype-as-name">è·å–å¼‚å¸¸å¯¹è±¡ï¼Œexcept exceptiontype as name</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">short_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">"Position [q to quit]? "</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s">'q'</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">position</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">short_list</span><span class="p">[</span><span class="n">position</span><span class="p">])</span>
    <span class="k">except</span> <span class="nb">IndexError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Bad index: "</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">other</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Something else broke: "</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="è‡ªå®šä¹‰å¼‚å¸¸">è‡ªå®šä¹‰å¼‚å¸¸</h3>
<p>å¼‚å¸¸æ˜¯ä¸€ä¸ªç±»ã€‚ç±» <code class="highlighter-rouge">Exception</code> çš„å­ç±»ã€‚</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UppercaseException</span><span class="p">(</span><span class="nb">Exception</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s">'a'</span><span class="p">,</span><span class="s">'b'</span><span class="p">,</span><span class="s">'c'</span><span class="p">,</span><span class="s">'AA'</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">i</span><span class="p">.</span><span class="n">isupper</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">UppercaseException</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="c1"># error
</span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">3</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="n">__main__</span><span class="p">.</span><span class="n">UppercaseException</span><span class="p">:</span> <span class="n">AA</span>
</code></pre></div></div>

<h2 id="å‘½ä»¤è¡Œå‚æ•°">å‘½ä»¤è¡Œå‚æ•°</h2>
<h3 id="å‘½ä»¤è¡Œå‚æ•°-1">å‘½ä»¤è¡Œå‚æ•°</h3>
<p>pythonæ–‡ä»¶ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="k">print</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span>
</code></pre></div></div>
<h2 id="pprintå‹å¥½è¾“å‡º">PPrint()å‹å¥½è¾“å‡º</h2>
<p>ä¸print()ç”¨æ³•ç›¸åŒï¼Œè¾“å‡ºç»“æœåƒæ˜¯åˆ—è¡¨å­—å…¸æ—¶ä¼šä¸åŒã€‚</p>

<h2 id="ç±»">ç±»</h2>
<h3 id="å­ç±»superè°ƒç”¨çˆ¶ç±»æ–¹æ³•">å­ç±»super()è°ƒç”¨çˆ¶ç±»æ–¹æ³•</h3>
<p>ä¸¾ä¸ªæ —å­ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Person</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

<span class="k">class</span> <span class="nc">email</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">().</span><span class="n">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">email</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">email</span><span class="p">(</span><span class="s">'me'</span><span class="p">,</span> <span class="s">'me@me.me'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">name</span>
<span class="p">...</span> <span class="s">'me'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">email</span>
<span class="p">...</span> <span class="s">'me@me.me'</span>
</code></pre></div></div>

<h3 id="self__name-ä¿æŠ¤ç§æœ‰ç‰¹æ€§">self.__name ä¿æŠ¤ç§æœ‰ç‰¹æ€§</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Person</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s">'me'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">name</span>
<span class="p">...</span> <span class="nb">AttributeError</span><span class="p">:</span> <span class="s">'Person'</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s">'__name'</span>

<span class="c1"># å°æŠ€å·§
</span><span class="n">a</span><span class="p">.</span><span class="n">_Person__name</span>
</code></pre></div></div>

<h3 id="å®ä¾‹æ–¹æ³•-instance-method-">å®ä¾‹æ–¹æ³•( instance method )</h3>
<p>å®ä¾‹æ–¹æ³•ï¼Œä»¥selfä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå½“å®ƒè¢«è°ƒç”¨æ—¶ï¼ŒPythonä¼šæŠŠè°ƒç”¨è¯¥æ–¹æ³•çš„çš„å¯¹è±¡ä½œä¸ºselfå‚æ•°ä¼ å…¥ã€‚</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">A</span><span class="p">():</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># è¿™å°±æ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•
</span>        <span class="n">A</span><span class="p">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></div>

<h3 id="ç±»æ–¹æ³•-classmethod">ç±»æ–¹æ³• @classmethod</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">A</span><span class="p">():</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">A</span><span class="p">.</span><span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="o">@</span><span class="nb">classmethod</span>
    <span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">h</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"hello"</span><span class="p">,</span><span class="n">h</span><span class="p">.</span><span class="n">count</span><span class="p">)</span>
</code></pre></div></div>
<p>æ³¨æ„ï¼Œä½¿ç”¨<code class="highlighter-rouge">h.count</code>(ç±»ç‰¹å¾)ï¼Œè€Œä¸æ˜¯<code class="highlighter-rouge">self.count</code>(å¯¹è±¡ç‰¹å¾)ã€‚</p>

<h3 id="é™æ€æ–¹æ³•-staticmethod">é™æ€æ–¹æ³• @staticmethod</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">A</span><span class="p">():</span>
    <span class="o">@</span><span class="nb">staticmethod</span>
    <span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"hello, staticmethod"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">A</span><span class="p">.</span><span class="n">hello</span><span class="p">()</span>
</code></pre></div></div>
<p>åˆ›å»ºå³ç”¨ï¼Œä¼˜é›…ä¸å¤±é£æ ¼ã€‚</p>

<h3 id="ç‰¹æ®Šæ–¹æ³•sqecial-method">ç‰¹æ®Šæ–¹æ³•(sqecial method)</h3>
<p>ä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">word</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
    <span class="k">def</span> <span class="nf">equals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word2</span><span class="p">):</span> <span class="c1">#æ³¨æ„
</span>        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">word2</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">lower</span><span class="p">()</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">word</span><span class="p">(</span><span class="s">'aa'</span><span class="p">)</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">word</span><span class="p">(</span><span class="s">'AA'</span><span class="p">)</span>
<span class="n">a3</span> <span class="o">=</span> <span class="n">word</span><span class="p">(</span><span class="s">'33'</span><span class="p">)</span>
<span class="n">a1</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="n">a2</span><span class="p">)</span>
<span class="c1"># True
</span></code></pre></div></div>
<p>ä½¿ç”¨ç‰¹æ®Šæ–¹æ³•ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">word</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word2</span><span class="p">):</span> <span class="c1">#æ³¨æ„ï¼Œä½¿ç”¨__eq__
</span>        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">word2</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">lower</span><span class="p">()</span>
<span class="n">a1</span> <span class="o">=</span> <span class="n">word</span><span class="p">(</span><span class="s">'aa'</span><span class="p">)</span>
<span class="n">a2</span> <span class="o">=</span> <span class="n">word</span><span class="p">(</span><span class="s">'AA'</span><span class="p">)</span>
<span class="n">a3</span> <span class="o">=</span> <span class="n">word</span><span class="p">(</span><span class="s">'33'</span><span class="p">)</span>
<span class="n">a1</span> <span class="o">==</span> <span class="n">a2</span>
<span class="c1"># True
</span></code></pre></div></div>
<p>å…¶ä»–è¿˜æœ‰ï¼š</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*æ–¹æ³•å*						*ä½¿ç”¨*
__eq__(self, other)			self == other
__ne__(self, other)			self != other
__lt__(self, other)			self &lt; other
__gt__(self, other)			self &gt; other
__le__(self, other)			self &lt;= other
__ge__(self, other)			self &gt;= other

__add__(self, other)		self + other
__sub__(self, other)		self - other
__mul__(self, other)		self * other
__floordiv__(self, other)	self // other
__truediv__(self, other)		self / other
__mod__(self, other)		self % other
__pow__(self, other)		self ** other

__str__(self)				str(self)
__repr__(self)				repr(self)
__len__(self)				len(self)
</code></pre></div></div>

<h2 id="æ–‡æœ¬å­—ç¬¦ä¸²">æ–‡æœ¬å­—ç¬¦ä¸²</h2>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">'%-10d | %-10f | %10s | %10x'</span> <span class="o">%</span> <span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="s">'ccc'</span><span class="p">,</span> <span class="mh">0xf</span> <span class="p">)</span>
<span class="c1">#
</span><span class="s">'1          | 1.200000   |        ccc |         33'</span>
</code></pre></div></div>

<h3 id="-å’Œ-format">{} å’Œ .format</h3>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">'{} {} {}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">)</span>
<span class="c1"># 11 22 33
</span><span class="s">'{2:2d} {0:-10d} {1:10d}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="mi">33</span><span class="p">)</span>
<span class="c1"># :åé¢æ˜¯æ ¼å¼æ ‡è¯†ç¬¦
# 33 11 22
</span>
<span class="s">'{a} {b} {c}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">22</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">33</span><span class="p">)</span>
</code></pre></div></div>

    </div>

    <a class="u-url" href="/2016/python-syntactic-sugar.html" hidden></a>
</article>

<div class="post-tags">
    
    <a>Python</a>
    
</div>

<div class="pagination">
    <ul>
        
        <li class="prev">
            <a href="/2016/python-qrcode.html" title="PREV: Python äºŒç»´ç ç”Ÿæˆåº“ qrcode ç¤ºä¾‹">
                â€¹ Python äºŒç»´ç ç”Ÿæˆåº“ qrcode ç¤ºä¾‹
            </a>
        </li>
        
        
        <li class="next">
            <a href="/2017/python-threading.html" title="NEXT: Python å¤šçº¿ç¨‹å’Œé”">
                â€º Python å¤šçº¿ç¨‹å’Œé”
            </a>
        </li>
        
    </ul>
</div>


<div class="giscus"></div>
<script src="https://giscus.app/client.js"
        data-repo="zzir/blog"
        data-repo-id="MDEwOlJlcG9zaXRvcnkyMTk2NjgyOTM="
        data-mapping="title"
        data-category="Show and tell"
        data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMTg1NDI3"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="light"
        crossorigin="anonymous"
        async>
</script>
    </div>
</main><footer>
    <p class="post-author"><a href="/">ZZIR</a></p>
</footer>
<script defer src="/assets/js/katex/katex.min.js" type="text/javascript"></script>
<script defer src="/assets/js/katex/auto-render.min.js" type="text/javascript"></script>
<script src="/assets/js/zooming.min.js" type="text/javascript"></script>
<script src="/assets/js/highlight.pack.js" type="text/javascript"></script>
<script>
    // zooming
    const zooming = new Zooming({
        customSize: '100%',
    });
    zooming.listen('.paragraph img');
    zooming.listen('.content img');
    zooming.listen('.post-content img');

    // highlight
    hljs.initHighlightingOnLoad();

    // katex
    document.addEventListener("DOMContentLoaded", function () {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false},
                {left: "\\(", right: "\\)", display: false},
                {left: "\\[", right: "\\]", display: true}
            ]
        });
    });

    // back display
    function getScrollTop() {
        var scrollTop = 0;
        if (document.documentElement && document.documentElement.scrollTop) {
            scrollTop = document.documentElement.scrollTop;
        } else if (document.body) {
            scrollTop = document.body.scrollTop;
        }
        return scrollTop;
    }

    window.onscroll = function () {
        if (getScrollTop() === 0) {
            document.getElementById("post-back").style.display = "block";
        }
    }
</script>


<script>
    // google analytics
    window.ga = window.ga || function () {
        (ga.q = ga.q || []).push(arguments)
    };
    ga.l = +new Date;
    ga('create', 'UA-121779014-1', 'auto');
    ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>
</html>