<!DOCTYPE html>
<html lang="zh"><head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="ZZIR">
    <meta name="description" content="FUN~">
    <meta name="keywords" content="zzir,Golang,Python,Docker,K8S">

    <link rel="stylesheet" href="/assets/css/style.css">

    <link href="https://fonts.googleapis.com/css?family=Noto+Serif+SC&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet"type="text/css">
    <link href="https://fonts.googleapis.com/css2?family=Major+Mono+Display&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.css">
    <link rel="stylesheet" href="/assets/css/github.css">

    <title>å•é“¾è¡¨ã€åŒé“¾è¡¨çš„ Golang å®ç°</title>
</head><body>
<main class="page-content" aria-label="Content">
    <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
    <div class="post-back" id="post-back" style="display: none">
        <a class="black-link" href="https://zzir.cn">ğŸ™„</a>
    </div>
    <header class="post-header">
        <h1 class="post-title p-name" itemprop="name headline">
            å•é“¾è¡¨ã€åŒé“¾è¡¨çš„ Golang å®ç°
        </h1>
        <p class="post-meta">
            <time class="dt-published" datetime="2020-01-05T00:00:00+08:00" itemprop="datePublished">Jan 5, 2020
            </time>ãƒ»
            <span itemprop="author" itemscope itemtype="http://schema.org/Person"
            ><span class="p-author h-card" itemprop="name">zzir</span></span
            ></p>
    </header>

    <div class="post-content e-content" itemprop="articleBody">
        <div class="sect1">
<h2 id="single-linked-list">Single Linked List</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="å•é“¾è¡¨å®šä¹‰">å•é“¾è¡¨å®šä¹‰</h3>
<div class="paragraph">
<p>æ­¤å¤„å°† <code>Node</code> å’Œ <code>List</code> åˆ†å¼€å®šä¹‰ï¼Œæ–¹ä¾¿ç†è§£ï¼Œå®˜æ–¹çš„æ–¹æ³•æ˜¯æŠŠä¸¤ä¸ªç»“æ„åˆå¹¶ï¼Œ<br>
æˆ³ï¼šhttps://golang.org/src/container/list/list.go?s=2063:2093#L14</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">type Node struct {
	value interface{}
	next  *Node
}

type List struct {
	len  int
	head *Node
	tail *Node
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="æ¥å£åˆ—è¡¨">æ¥å£åˆ—è¡¨</h3>
<div class="paragraph">
<p>éå¿…è¦å¯ä»¥çœç•¥æ­¤æ­¥éª¤ï¼Œæ­¤å¤„ä½¿ç”¨ <code>Interface</code> åªæ˜¯ä¸ºäº†æ–¹ä¾¿é˜…è¯»å’Œå±•ç¤ºã€‚</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">type SingleLinkedList interface {
	Init()
	Len() int
	PushFront(v interface{})
	PushBack(v interface{})
	Insert(v interface{}, index int) error
	RemoveFront() interface{}
	RemoveBack() interface{}
	Remove(index int) interface{}
	GetHead() *Node
	Get(index int) interface{}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h3>
<div class="paragraph">
<p>åˆå§‹åŒ–æ“ä½œï¼Œéœ€è¦æ‰‹åŠ¨åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥å®ç°åœ¨é¦–æ¬¡æ’å…¥æ—¶è¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">func (l *List) Init() {
	l.len = 0
	l.head = nil
	l.tail = nil
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="é“¾è¡¨é•¿åº¦">é“¾è¡¨é•¿åº¦</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">func (l *List) Len() int {
	return l.len
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="æ·»åŠ æ“ä½œ">æ·»åŠ æ“ä½œ</h3>
<div class="paragraph">
<p>æ–°èŠ‚ç‚¹ä¸‰ç§æ’å…¥æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ å¤´éƒ¨æ’å…¥ã€æœ«å°¾æ’å…¥ã€æŒ‡å®šä½ç½®æ’å…¥ã€‚</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">// ä»é“¾è¡¨å¤´éƒ¨æ’å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹
func (l *List) PushFront(v interface{}) {
	node := &amp;Node{
		value: v,
		next:  nil,
	}
	if l.len == 0 {
		l.tail = node
	} else {
		node.next = l.head
	}
	l.head = node
	l.len++
}

// ä»é“¾è¡¨å°¾éƒ¨æ’å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹
func (l *List) PushBack(v interface{}) {
	node := &amp;Node{
		value: v,
		next:  nil,
	}
	if l.len == 0 {
		l.head = node
	} else {
		l.tail.next = node
	}
	l.tail = node
	l.len++
}

// æŒ‡å®šä½ç½®ï¼Œæ’å…¥æ–°èŠ‚ç‚¹
func (l *List) Insert(v interface{}, index int) error {
	if index &gt;= l.len {
		return errors.New("index error")
	}
	if index == 0 {
		l.PushFront(v)
		return nil
	}
	node := &amp;Node{
		value: v,
		next:  nil,
	}
	prev := l.head
	for i := 1; i &lt; l.len; i++ {
		if i == index {
			node.next = prev.next
			prev.next = node
			l.len++
			return nil
		}
		prev = prev.next
	}

	return errors.New("insert error")
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ç§»é™¤æ“ä½œ">ç§»é™¤æ“ä½œ</h3>
<div class="paragraph">
<p>ä¸‰ç§ç§»é™¤æ“ä½œï¼Œç§»é™¤å¤´éƒ¨ã€ç§»é™¤å°¾éƒ¨ã€æŒ‡å®šä½ç½®ç§»é™¤ã€‚</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">// ç§»é™¤å¤´éƒ¨èŠ‚ç‚¹
func (l *List) RemoveFront() interface{} {
	if l.len == 0 {
		return nil
	}
	node := l.head
	l.head = l.head.next
	l.len--
	return node.value
}

// ç§»é™¤å°¾éƒ¨èŠ‚ç‚¹
func (l *List) RemoveBack() interface{} {
	if l.len == 0 {
		return nil
	}
	node := l.head
	for i := 1; i &lt; l.len-1; i++ {
		node = node.next
	}
	tmp := node.next
	node.next = nil
	l.tail = node
	l.len--
	return tmp.value
}

// æŒ‡å®šä½ç½®ç§»é™¤èŠ‚ç‚¹
func (l *List) Remove(index int) interface{} {
	if l.len == 0 {
		return nil
	}
	if index == 0 {
		return l.RemoveFront()
	} else if index == l.len-1 {
		return l.RemoveBack()
	}
	node := l.head
	for i := 1; i &lt; index; i++ {
		node = node.next
	}
	tmp := node.next
	node.next = node.next.next
	l.len--
	return tmp.value
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="è·å–èŠ‚ç‚¹">è·å–èŠ‚ç‚¹</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">// è·å–å¤´éƒ¨èŠ‚ç‚¹
func (l *List) GetHead() *Node {
	return l.head
}

// è·å–æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹å€¼
func (l *List) Get(index int) interface{} {
	if index &gt;= l.len {
		return nil
	}
	node := l.head
	for i := 0; i &lt; l.len; i++ {
		if i == index {
			return node.value
		}
		node = node.next
	}
	return nil
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="æµ‹è¯•">æµ‹è¯•</h3>
<div class="paragraph">
<p>å®Œæ•´ä»£ç è§ï¼š<br>
<a href="https://github.com/zzir/algo/blob/master/code/linked_list/single_linked_list/list.go" class="bare">https://github.com/zzir/algo/blob/master/code/linked_list/single_linked_list/list.go</a></p>
</div>
<div class="paragraph">
<p>æµ‹è¯•ç”¨ä¾‹ï¼š</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">func main() {
	var sl SingleLinkedList = &amp;List{}
	sl.Init()
	sl.PushFront(6)
	sl.PushFront(7)
	sl.PushFront(8)
	sl.PushBack(1)
	sl.PushBack(2)
	sl.PushBack(3)
	fmt.Println("r", sl.RemoveFront())
	_ = sl.Insert(9, 0)
	_ = sl.Insert(8, 5)
	fmt.Println("r", sl.RemoveBack())
	fmt.Println("r", sl.RemoveBack())
	fmt.Println("rm", sl.Remove(1))
	fmt.Println("rm", sl.Remove(2))

	fmt.Println("len", sl.Len())
	node := sl.GetHead()
	for {
		fmt.Println("&gt;&gt;&gt;", node.value)
		if node.next == nil {
			break
		}
		node = node.next
	}
	fmt.Println(sl.Get(1))
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="double-linked-list">Double Linked List</h2>
<div class="sectionbody">
<div class="paragraph">
<p>åœ¨ Single Linked List çš„åŸºç¡€ä¸Šä¿®æ”¹ã€‚</p>
</div>
<div class="sect2">
<h3 id="å®šä¹‰">å®šä¹‰</h3>
<div class="paragraph">
<p>å¢åŠ äº† <code>prev</code> å­—æ®µã€‚</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">type Node struct {
	value interface{}
	next  *Node
	prev  *Node // add prev
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="æ¥å£åˆ—è¡¨-2">æ¥å£åˆ—è¡¨</h3>
<div class="paragraph">
<p>å¢åŠ äº† <code>GetTail</code> æ¥å£ï¼Œè·å–å°¾éƒ¨èŠ‚ç‚¹ã€‚</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">type DoubleLinkedList interface {
	Init()
	Len() int
	PushFront(v interface{})
	PushBack(v interface{})
	Insert(v interface{}, index int) error
	RemoveFront() interface{}
	RemoveBack() interface{}
	Remove(index int) interface{}
	GetHead() *Node
	GetTail() *Node // add
	Get(index int) interface{}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="æ’å…¥æ“ä½œ">æ’å…¥æ“ä½œ</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">func (l *List) PushFront(v interface{}) {
	node := &amp;Node{
		value: v,
		next:  nil,
		prev:  nil, // add
	}
	if l.len == 0 {
		l.tail = node
	} else {
		l.head.prev = node // add
		node.next = l.head
	}
	l.head = node
	l.len++
}

func (l *List) PushBack(v interface{}) {
	node := &amp;Node{
		value: v,
		next:  nil,
		prev:  nil, // add
	}
	if l.len == 0 {
		l.head = node
	} else {
		node.prev = l.tail // add
		l.tail.next = node
	}
	l.tail = node
	l.len++
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="æŒ‡å®šä½ç½®æ’å…¥èŠ‚ç‚¹">æŒ‡å®šä½ç½®æ’å…¥èŠ‚ç‚¹</h4>
<div class="paragraph">
<p>è¿™é‡Œåšäº†ä¸€ä¸ªåˆ¤æ–­ï¼Œä»¥é“¾è¡¨é•¿åº¦ä¸­å€¼ä¸ºåŸºå‡†ï¼Œå½“æ’å…¥å½“ä½ç½®é è¿‘èµ·ç‚¹æ—¶ï¼Œä»å¤´éƒ¨å¼€å§‹å¾€ä¸­é—´éå†æ’å…¥ï¼Œåä¹‹ï¼Œä»æœ«å°¾å¾€ä¸­é—´éå†æ’å…¥ã€‚</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">func (l *List) Insert(v interface{}, index int) error {
	// new
	if index &gt;= l.len {
		return errors.New("index error")
	}
	if index == 0 {
		l.PushFront(v)
		return nil
	}
	if index == l.len-1 {
		l.PushBack(v)
		return nil
	}

	mid := l.len / 2 // chose to start from the front or behind

	newNode := &amp;Node{
		value: v,
		next:  nil,
		prev:  nil,
	}
	node := &amp;Node{}
	if index &lt;= mid { // from front
		node = l.head
		for i := 1; i &lt;= mid; i++ {
			if i == index {
				break
			}
			node = node.next
		}
	} else { // from behind
		node = l.tail
		for i := l.len; i &gt; mid; i-- {
			if i == index {
				break
			}
			node = node.prev
		}
	}
	newNode.prev = node
	newNode.next = node.next
	node.next.prev = newNode
	node.next = newNode
	l.len++
	return nil
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ç§»é™¤æ“ä½œ-2">ç§»é™¤æ“ä½œ</h3>
<div class="paragraph">
<p>ç§»é™¤å¤´éƒ¨èŠ‚ç‚¹ã€ç§»é™¤å°¾éƒ¨èŠ‚ç‚¹ã€‚</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">func (l *List) RemoveFront() interface{} {
	if l.len == 0 {
		return nil
	}
	node := l.head
	l.head = l.head.next
	l.head.prev = nil // add
	l.len--
	return node.value
}

func (l *List) RemoveBack() interface{} {
	// new
	if l.len == 0 {
		return nil
	}
	node := l.tail
	l.tail = l.tail.prev
	l.tail.next = nil
	l.len--
	return node.value
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="æŒ‡å®šä½ç½®ç§»é™¤">æŒ‡å®šä½ç½®ç§»é™¤</h4>
<div class="paragraph">
<p>ç§»é™¤æŒ‡å®šä½ç½®çš„èŠ‚ç‚¹ï¼Œå’ŒæŒ‡å®šä½ç½®æ’å…¥ä¸€æ ·ï¼Œæ ¹æ®æ˜¯å¦æ›´é è¿‘é“¾è¡¨ä¸¤ç«¯ï¼Œä»å¤´æˆ–å°¾éƒ¨å¼€å§‹å¾€åæ–¹å‘éå†ã€‚</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">func (l *List) Remove(index int) interface{} {
	// new
	if l.len == 0 {
		return nil
	}
	if index == 0 {
		return l.RemoveFront()
	} else if index == l.len-1 {
		return l.RemoveBack()
	}

	mid := l.len / 2

	node := &amp;Node{}
	if index &lt;= mid {
		node = l.head
		for i := 1; i &lt;= mid; i++ {
			if i == index {
				break
			}
			node = node.next
		}

	} else {
		node = l.tail
		for i := l.len; i &gt; mid; i-- {
			if i == index {
				break
			}
			node = node.prev
		}
	}
	tmp := node.next
	node.next = tmp.next
	tmp.next.prev = node
	l.len--
	return tmp.value
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="è·å–èŠ‚ç‚¹-2">è·å–èŠ‚ç‚¹</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">// è·å–å°¾éƒ¨èŠ‚ç‚¹ï¼Œå¯ç”¨äºä»å°¾éƒ¨å¾€å‰éå†
// add
func (l *List) GetTail() *Node {
	return l.tail
}

// è·å–æŒ‡å®šèŠ‚ç‚¹å€¼
func (l *List) Get(index int) interface{} {
	// new
	if index &gt;= l.len {
		return nil
	}

	mid := l.len

	node := &amp;Node{}
	if index &lt;= mid {
		node = l.head
		for i := 0; i &lt;= mid; i++ {
			if i == index {
				return node.value
			}
			node = node.next
		}
	} else {
		node = l.tail
		for i := l.len; i &gt; mid; i-- {
			if i == index {
				return node.value
			}
			node = node.prev
		}
	}
	return nil
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="æµ‹è¯•-2">æµ‹è¯•</h3>
<div class="paragraph">
<p>å®Œæ•´ä»£ç è§ï¼š<br>
<a href="https://github.com/zzir/algo/blob/master/code/linked_list/double_linked_list/list.go" class="bare">https://github.com/zzir/algo/blob/master/code/linked_list/double_linked_list/list.go</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-go hljs" data-lang="go">func main() {
	var dl DoubleLinkedList = &amp;List{}
	dl.Init()
	dl.PushFront(1)
	dl.PushFront(2)
	dl.PushFront(3)
	dl.PushBack(4)
	dl.PushBack(5)
	dl.PushBack(6)
	_ = dl.Insert(9, 1)
	_ = dl.Insert(9, 2)
	_ = dl.Insert(8, 5)
	_ = dl.Insert(8, 6)
	dl.RemoveFront()
	dl.RemoveBack()
	dl.Remove(1)
	dl.Remove(4)
	fmt.Println(1, dl.Get(1))
	fmt.Println(5, dl.Get(5))
	fmt.Println(3, dl.Get(3))

	fmt.Println("len", dl.Len())
	node := dl.GetHead()
	for {
		fmt.Print(node.value, " ")
		if node.next == nil {
			break
		}
		node = node.next
	}
	fmt.Print("\n")

	node = dl.GetTail()
	for {
		fmt.Print(node.value, " ")
		if node.prev == nil {
			break
		}
		node = node.prev
	}
	fmt.Print("\n")

}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reference">Reference</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://golang.org/pkg/container/list/" class="bare">https://golang.org/pkg/container/list/</a></p>
</li>
<li>
<p><a href="https://github.com/golang/go/blob/master/src/container/list/list.go" class="bare">https://github.com/golang/go/blob/master/src/container/list/list.go</a></p>
</li>
</ul>
</div>
</div>
</div>
    </div>

    <a class="u-url" href="/2020/go-linked-list.html" hidden></a>
</article>

<div class="post-tags">
    
    <a>Golang</a>
    
    <a>LinkedList</a>
    
</div>

<div class="pagination">
    <ul>
        
        <li class="prev">
            <a href="/2019/dockerfile-and-registry.html" title="PREV: Dockerfile And Registry">
                â€¹ Dockerfile And Registry
            </a>
        </li>
        
        
        <li class="next">
            <a href="/2020/http-protocol.html" title="NEXT: Golang è§†è§’ HTTP åè®®çš„æµ…å…¥æ·±å‡º">
                â€º Golang è§†è§’ HTTP åè®®çš„æµ…å…¥æ·±å‡º
            </a>
        </li>
        
    </ul>
</div>


<div class="giscus"></div>
<script src="https://giscus.app/client.js"
        data-repo="zzir/blog"
        data-repo-id="MDEwOlJlcG9zaXRvcnkyMTk2NjgyOTM="
        data-mapping="title"
        data-category="Show and tell"
        data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMTg1NDI3"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-theme="light"
        crossorigin="anonymous"
        async>
</script>
    </div>
</main><footer>
    <p class="post-author"><a href="/">ZZIR</a></p>
</footer>
<script defer src="/assets/js/katex/katex.min.js" type="text/javascript"></script>
<script defer src="/assets/js/katex/auto-render.min.js" type="text/javascript"></script>
<script src="/assets/js/zooming.min.js" type="text/javascript"></script>
<script src="/assets/js/highlight.pack.js" type="text/javascript"></script>
<script>
    // zooming
    const zooming = new Zooming({
        customSize: '100%',
    });
    zooming.listen('.paragraph img');
    zooming.listen('.content img');
    zooming.listen('.post-content img');

    // highlight
    hljs.initHighlightingOnLoad();

    // katex
    document.addEventListener("DOMContentLoaded", function () {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false},
                {left: "\\(", right: "\\)", display: false},
                {left: "\\[", right: "\\]", display: true}
            ]
        });
    });

    // back display
    function getScrollTop() {
        var scrollTop = 0;
        if (document.documentElement && document.documentElement.scrollTop) {
            scrollTop = document.documentElement.scrollTop;
        } else if (document.body) {
            scrollTop = document.body.scrollTop;
        }
        return scrollTop;
    }

    window.onscroll = function () {
        if (getScrollTop() === 0) {
            document.getElementById("post-back").style.display = "block";
        }
    }
</script>


<script>
    // google analytics
    window.ga = window.ga || function () {
        (ga.q = ga.q || []).push(arguments)
    };
    ga.l = +new Date;
    ga('create', 'UA-121779014-1', 'auto');
    ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>
</html>